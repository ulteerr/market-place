components:
  schemas:

    User:
      type: object
      required: [id, email, first_name, last_name]
      properties:
        id:
          type: string
          format: uuid
          example: d3302fd5-360b-48ba-a049-40aa4accf26f
        email:
          type: string
          format: email
          example: alex.johnson@example.com
        first_name:
          type: string
          example: Alex
        last_name:
          type: string
          example: Johnson
        middle_name:
          type: string
          nullable: true
          example: Michael
        phone:
          type: string
          nullable: true
          example: "+79998887766"
        roles:
          type: array
          description: Global platform roles
          items:
            type: string
          example: [participant, admin]

        is_admin:
          type: boolean
          example: true

        can_access_admin_panel:
          type: boolean
          example: true
        settings:
          $ref: '#/components/schemas/UserSettings'


    UserResponse:
      type: object
      required: [status, user]
      properties:
        status:
          type: string
          example: ok
        user:
          $ref: '#/components/schemas/User'


    UpdateMeRequest:
      type: object
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email


    UpdateMePasswordRequest:
      type: object
      required: [password, password_confirmation]
      properties:
        password:
          type: string
          format: password
        password_confirmation:
          type: string
          format: password

    UpdateMeSettingsRequest:
      type: object
      required: [settings]
      properties:
        settings:
          $ref: '#/components/schemas/UserSettings'

    UserSettings:
      type: object
      properties:
        theme:
          type: string
          enum: [light, dark]
          example: dark
        admin_crud_preferences:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AdminCrudPreference'
      additionalProperties: true
      example:
        theme: dark
        admin_crud_preferences:
          users:
            contentMode: cards
            tableOnDesktop: false

    AdminCrudPreference:
      type: object
      properties:
        contentMode:
          type: string
          enum: [table, table-cards, cards]
          example: table-cards
        tableOnDesktop:
          type: boolean
          example: true
      additionalProperties: false


    CreateAdminUserRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
        - password
        - password_confirmation
      properties:
        first_name:
          type: string
          maxLength: 255
          example: John
        last_name:
          type: string
          maxLength: 255
          example: Doe
        middle_name:
          type: string
          nullable: true
          maxLength: 255
          example: M
        email:
          type: string
          format: email
          example: john@example.com
        password:
          type: string
          format: password
          minLength: 6
          example: password123
        password_confirmation:
          type: string
          format: password
          minLength: 6
          example: password123
        phone:
          type: string
          nullable: true
          maxLength: 20
          example: "+79998887766"
        roles:
          type: array
          items:
            type: string
          example: [moderator]


    UpdateAdminUserRequest:
      type: object
      properties:
        first_name:
          type: string
          maxLength: 255
          example: John
        last_name:
          type: string
          maxLength: 255
          example: Doe
        middle_name:
          type: string
          nullable: true
          maxLength: 255
          example: M
        email:
          type: string
          format: email
          example: john@example.com
        password:
          type: string
          format: password
          minLength: 6
          example: password123
        password_confirmation:
          type: string
          format: password
          minLength: 6
          example: password123
        phone:
          type: string
          nullable: true
          maxLength: 20
          example: "+79998887766"
        roles:
          type: array
          items:
            type: string
          example: [admin, moderator]
