admin_changelog:
  get:
    tags: [Admin ChangeLog]
    summary: List changelog entries (admin)
    security:
      - bearerAuth: []
    parameters:
      - name: model
        in: query
        required: false
        schema:
          type: string
          example: user
        description: Model alias or FQCN from changelog config.
      - name: entity_id
        in: query
        required: false
        schema:
          type: string
          format: uuid
      - name: event
        in: query
        required: false
        schema:
          type: string
          enum: [create, update, delete, restore]
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 200
          example: 30
    responses:
      "200":
        description: Paginated changelog entries
        content:
          application/json:
            schema:
              $ref: ../schemas/changelog.yaml#/components/schemas/ChangeLogPaginatedResponse
      "401":
        $ref: ../errors.yaml#/UnauthorizedError
      "403":
        $ref: ../errors.yaml#/ForbiddenError

admin_changelog_by_id:
  parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
  get:
    tags: [Admin ChangeLog]
    summary: Get changelog entry by id (admin)
    security:
      - bearerAuth: []
    responses:
      "200":
        description: Changelog entry details
        content:
          application/json:
            schema:
              $ref: ../schemas/changelog.yaml#/components/schemas/ChangeLogSingleResponse
      "401":
        $ref: ../errors.yaml#/UnauthorizedError
      "403":
        $ref: ../errors.yaml#/ForbiddenError
      "404":
        $ref: ../errors.yaml#/NotFoundError

admin_changelog_rollback:
  parameters:
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
  post:
    tags: [Admin ChangeLog]
    summary: Rollback entity state to selected changelog entry (admin only)
    description: >
      Applies rollback for the entity/version represented by this changelog entry.
      Supports create/update/delete/restore entries.
    security:
      - bearerAuth: []
    responses:
      "200":
        description: Rollback completed
        content:
          application/json:
            schema:
              $ref: ../schemas/changelog.yaml#/components/schemas/ChangeLogRollbackResponse
      "401":
        $ref: ../errors.yaml#/UnauthorizedError
      "403":
        $ref: ../errors.yaml#/ForbiddenError
      "404":
        $ref: ../errors.yaml#/NotFoundError
      "409":
        description: Rollback conflict (schema mismatch or invalid target state)
        content:
          application/json:
            schema:
              type: object
              required: [status, message]
              properties:
                status:
                  type: string
                  example: error
                message:
                  type: string
                  example: "Cannot rollback: model schema signature mismatch."
