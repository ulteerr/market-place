openapi: 3.0.3

info:
  title: Marketplace API
  version: 1.0.0

servers:
  - url: http://localhost:8080
    description: Local backend (nginx)

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: Sanctum

security:
  - bearerAuth: []

paths:
  /api/auth/login:
    $ref: ./modules/auth.yaml#/login

  /api/auth/register:
    $ref: ./modules/auth.yaml#/register

  /api/me:
    $ref: ./modules/users.yaml#/me

  /api/me/password:
    $ref: ./modules/users.yaml#/me_update_password
  
  /api/me/settings:
    $ref: ./modules/users.yaml#/me_update_settings

  /api/me/settings/stream:
    $ref: ./modules/users.yaml#/me_settings_stream

  /api/me/avatar:
    $ref: ./modules/users.yaml#/me_avatar

  /api/admin/users:
    $ref: ./modules/users.yaml#/admin_users

  /api/admin/users/{id}:
    $ref: ./modules/users.yaml#/admin_users_by_id

  /api/admin/roles:
    $ref: ./modules/users.yaml#/admin_roles

  /api/admin/permissions:
    $ref: ./modules/users.yaml#/admin_permissions

  /api/admin/roles/{id}:
    $ref: ./modules/users.yaml#/admin_roles_by_id

  /api/admin/organizations:
    $ref: ./modules/organizations.yaml#/admin_organizations

  /api/admin/organizations/{id}:
    $ref: ./modules/organizations.yaml#/admin_organizations_by_id

  /api/admin/children:
    $ref: ./modules/children.yaml#/admin_children

  /api/admin/children/{id}:
    $ref: ./modules/children.yaml#/admin_children_by_id

  /api/organizations/my:
    $ref: ./modules/organizations.yaml#/my_organizations

  /api/organizations/{organizationId}/owner/transfer:
    $ref: ./modules/organizations.yaml#/organization_owner_transfer

  /api/organizations/{organizationId}/join-requests:
    $ref: ./modules/organizations.yaml#/organization_join_requests

  /api/organizations/{organizationId}/join-requests/my:
    $ref: ./modules/organizations.yaml#/organization_join_requests_my

  /api/organizations/{organizationId}/join-requests/{requestId}/approve:
    $ref: ./modules/organizations.yaml#/organization_join_requests_review

  /api/organizations/{organizationId}/join-requests/{requestId}/reject:
    $ref: ./modules/organizations.yaml#/organization_join_requests_review

  /api/organizations/{organizationId}/members:
    $ref: ./modules/organizations.yaml#/organization_members

  /api/organizations/{organizationId}/members/{memberId}:
    $ref: ./modules/organizations.yaml#/organization_members_by_id

  /api/geo/countries:
    $ref: ./modules/geo.yaml#/geo_countries

  /api/geo/regions:
    $ref: ./modules/geo.yaml#/geo_regions

  /api/geo/cities:
    $ref: ./modules/geo.yaml#/geo_cities

  /api/geo/districts:
    $ref: ./modules/geo.yaml#/geo_districts

  /api/metro-lines:
    $ref: ./modules/metro.yaml#/geo_metro_lines

  /api/metro-stations:
    $ref: ./modules/metro.yaml#/geo_metro_stations

  /api/admin/geo/countries:
    $ref: ./modules/geo.yaml#/admin_geo_countries

  /api/admin/geo/countries/{id}:
    $ref: ./modules/geo.yaml#/admin_geo_countries_by_id

  /api/admin/geo/regions:
    $ref: ./modules/geo.yaml#/admin_geo_regions

  /api/admin/geo/regions/{id}:
    $ref: ./modules/geo.yaml#/admin_geo_regions_by_id

  /api/admin/geo/cities:
    $ref: ./modules/geo.yaml#/admin_geo_cities

  /api/admin/geo/cities/{id}:
    $ref: ./modules/geo.yaml#/admin_geo_cities_by_id

  /api/admin/geo/districts:
    $ref: ./modules/geo.yaml#/admin_geo_districts

  /api/admin/geo/districts/{id}:
    $ref: ./modules/geo.yaml#/admin_geo_districts_by_id

  /api/admin/metro-lines:
    $ref: ./modules/metro.yaml#/admin_geo_metro_lines

  /api/admin/metro-lines/{id}:
    $ref: ./modules/metro.yaml#/admin_geo_metro_lines_by_id

  /api/admin/metro-stations:
    $ref: ./modules/metro.yaml#/admin_geo_metro_stations

  /api/admin/metro-stations/{id}:
    $ref: ./modules/metro.yaml#/admin_geo_metro_stations_by_id

  /api/admin/changelog:
    $ref: ./modules/changelog.yaml#/admin_changelog

  /api/admin/changelog/{id}:
    $ref: ./modules/changelog.yaml#/admin_changelog_by_id

  /api/admin/changelog/{id}/rollback:
    $ref: ./modules/changelog.yaml#/admin_changelog_rollback
